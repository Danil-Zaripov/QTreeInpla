use "./src/matrix.in";

// QTreeNode(QTreeLeaf(3), QTreeLeaf(4), QTreeLeaf(1), QTreeLeaf(2))

sum(r, 4)~QTreeNode(QTreeLeaf(3), QTreeLeaf(4), QTreeLeaf(1), QTreeLeaf(2));

r; free r;



// QTreeNode(
//  QTreeNode(QTreeLeaf(2), QTreeLeaf(0), QTreeLeaf(1), QTreeLeaf(0)),
//  QTreeLeaf(3),
//  QTreeNode(QTreeLeaf(1), QTreeLeaf(1), QTreeLeaf(0), QTreeLeaf(1)),
//  QTreeLeaf(0)
// )


sum(r, 4)~QTreeNode(
 QTreeNode(QTreeLeaf(2), QTreeLeaf(0), QTreeLeaf(1), QTreeLeaf(0)),
 QTreeLeaf(3),
 QTreeNode(QTreeLeaf(1), QTreeLeaf(1), QTreeLeaf(0), QTreeLeaf(1)),
 QTreeLeaf(0)
);

r; free r;

Eq(r, QTreeLeaf(3))~QTreeLeaf(3);
r; free r;


Eq4(r, QTreeLeaf(3), QTreeLeaf(3), QTreeLeaf(3)) ~ QTreeLeaf(3);
r; free r;


MkNode(r) ~ (QTreeLeaf(3), QTreeLeaf(3), QTreeLeaf(3), QTreeLeaf(3));
r; free r;

MkNode(tree1) ~ (QTreeLeaf(1), QTreeLeaf(2), QTreeLeaf(3), QTreeLeaf(4));
tree2 ~ QTreeLeaf(1);
op_add(r) >< (x, y) =>
  Add(r, x) ~ y;

QTreeMap2(r, %op_add, tree1) ~ tree2;
r; free r tree1 tree2;

MkNode(tree1) ~ (QTreeLeaf(1), QTreeLeaf(2), QTreeLeaf(3), QTreeLeaf(4));
MkNode(tree2) ~ (QTreeLeaf(1), QTreeLeaf(2), QTreeLeaf(3), QTreeLeaf(4));

QTreeMap2(r, %op_add, tree1) ~ tree2;
r; free r tree1 tree2 op_add;
